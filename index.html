<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>
      永久保存版! Dockerだけじゃない、注目のコンテナランタイム10選 ~
      Kubernetesを添えて。【初心者向け】
    </title>

    <meta
      name="description"
      content="Dockerなどのコンテナランタイム周りの歴史。Kubernetesとの関係。"
    />
    <meta name="author" content="kaitoy" />

    <link href="css/impress.css" rel="stylesheet" />
    <link href="css/chronicle.css" rel="stylesheet" />

    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  </head>

  <body class="impress-not-supported">
    <div class="fallback-message">
      <p>
        Your browser <b>doesn't support the features required</b> by impress.js, so you are
        presented with a simplified version of this presentation.
      </p>
      <p>
        For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or
        <b>Firefox</b> browser.
      </p>
    </div>

    <div class="timeline">
      <div class="timeline-item timeline-item-2013">
        2013
        <div class="year-ticks">
          <div class="year-ticks-item year-ticks-item-first"></div>
          <div class="year-ticks-item">Apr</div>
          <div class="year-ticks-item">Jul</div>
          <div class="year-ticks-item">Oct</div>
        </div>
      </div>
      <div class="timeline-item timeline-item-2014">
        2014
        <div class="year-ticks">
          <div class="year-ticks-item year-ticks-item-first"></div>
          <div class="year-ticks-item">Mar</div>
          <div class="year-ticks-item">Jun</div>
          <div class="year-ticks-item">Sep</div>
        </div>
      </div>
      <div class="timeline-item timeline-item-2015">
        2015
        <div class="year-ticks">
          <div class="year-ticks-item year-ticks-item-first"></div>
          <div class="year-ticks-item">Mar</div>
          <div class="year-ticks-item">Jun</div>
          <div class="year-ticks-item">Sep</div>
        </div>
      </div>
      <div class="timeline-item timeline-item-2016">
        2016
        <div class="year-ticks">
          <div class="year-ticks-item year-ticks-item-first"></div>
          <div class="year-ticks-item">Mar</div>
          <div class="year-ticks-item">Jun</div>
          <div class="year-ticks-item">Sep</div>
        </div>
      </div>
      <div class="timeline-item timeline-item-2017">
        2017
        <div class="year-ticks">
          <div class="year-ticks-item year-ticks-item-first"></div>
          <div class="year-ticks-item">Mar</div>
          <div class="year-ticks-item">Jun</div>
          <div class="year-ticks-item">Sep</div>
        </div>
      </div>
      <div class="timeline-item timeline-item-2018">
        2018
        <div class="year-ticks">
          <div class="year-ticks-item year-ticks-item-first"></div>
          <div class="year-ticks-item">Mar</div>
          <div class="year-ticks-item">Jun</div>
          <div class="year-ticks-item">Sep</div>
        </div>
      </div>
    </div>

    <div class="month-pointer"></div>

    <div id="impress">
      <div id="y2013-docker" class="step cr-logo" data-x="-2500" data-y="-1500">
        <h2><span>2013/3</span></h2>
        <img class="logo" src="img/docker.png" />
      </div>

      <div
        id="y2013-docker-descr"
        class="step slide cr-descr"
        data-x="-2500"
        data-y="-1500"
        data-rotate-x="90"
      >
        <img src="img/docker-descr.png" />
        <div class="descr-text">
          <h2>Docker</h2>
          <ul>
            <li>言わずと知れたDocker。</li>
            <li>Docker社が開発。2013年3月に初版リリース。</li>
            <li>
              namespaceで論理リソースを隔離し、cgroupsでハードウェアリソースを隔離し、union
              filesystemとpivot_rootでファイルシステムを隔離し、その中でプロセスを起動。
            </li>
            <li>Kubernetes 1.2まではコンテナランタイムはDocker一択で、内部APIで密連携していた。</li>
          </ul>
        </div>
      </div>

      <div id="y2014-rkt" class="step cr-logo" data-x="-1500" data-y="-1000">
        <h2><span>2014/12</span></h2>
        <img class="logo" src="img/rkt.png" />
      </div>

      <div
        id="y2014-rkt-descr"
        class="step slide cr-descr"
        data-x="-1500"
        data-y="-1000"
        data-rotate-x="90"
      >
        <img src="img/rkt-descr.png" />
        <div class="descr-text">
          <h2>rkt</h2>
          <ul>
            <li>CoreOS社開発。</li>
            <li>2014年12月に発表。</li>
            <li>App Container (aka. appc)仕様のリファレンス実装。</li>
            <li>
              stage 1を入れ替えることで様々な隔離レベルでコンテナを起動できる。(e.g. fly、kvm)
            </li>
            <li>Kubernetesはv1.3で第二のコンテナランタイムとしてrktをサポート。</li>
          </ul>
        </div>
      </div>

      <div id="y2015-windows" class="step cr-logo" data-x="-500" data-y="-500">
        <h2><span>2015/4</span></h2>
        <img class="logo" src="img/windows.png" />
      </div>

      <div
        id="y2015-windows-descr"
        class="step slide cr-descr"
        data-x="-500"
        data-y="-500"
        data-rotate-x="90"
      >
        <img src="img/windows-descr.png" />
        <div class="descr-text">
          <h2>Windows Containers</h2>
          <ul>
            <li>もちろんMicrosoft開発。</li>
            <li>2015年4月に発表。</li>
            <li>
              Windows上でWindowsのコンテナもLinuxのコンテナも動かせる。(後者はHyper-V Isolationのみ)
            </li>
            <li>
              Host Compute Service (HCS)というサービスの上に実装されている。
            </li>
            <li>この時点ではKubernetesは未サポート。</li>
          </ul>
        </div>
      </div>

      <div id="y2015-runc" class="step cr-logo" data-x="-500" data-y="0">
        <h2><span>2015/6</span></h2>
        <img class="logo" src="img/oci.png" />
        <img class="logo" src="img/runc.png" />
      </div>

      <div
        id="y2015-runc-descr"
        class="step slide cr-descr"
        data-x="-500"
        data-y="0"
        data-rotate-x="90"
      >
        <img src="img/runc-descr.png" />
        <div class="descr-text">
          <h2>OCIとrunC</h2>
          <ul>
            <li>Open Container Initiative (OCI)は2015年6月にDocker社とCoreOS社などで発足。</li>
            <li>コンテナランタイム、コンテナイメージなどの仕様を標準化。</li>
            <li>
              runCはDocker社がOCIと同時に発表したOCIコンテナランタイム標準のリファレンス実装。
            </li>
            <li>
              OCIコンテナランタイムは低レベルコンテナランタイムと呼ばれることも。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2015-cc" class="step cr-logo" data-x="-500" data-y="500">
        <h2><span>2015/5</span></h2>
        <img class="logo" src="img/cc.png" />
      </div>

      <div
        id="y2015-cc-descr"
        class="step slide cr-descr"
        data-x="-500"
        data-y="500"
        data-rotate-x="90"
      >
        <img src="img/cc-descr.png" />
        <div class="descr-text">
          <h2>Clear Containers</h2>
          <ul>
            <li>2015年5月に発表されたインテルによるコンテナ技術。</li>
            <li>VMで各コンテナをラップして、ホストと強く隔離する。</li>
            <li>OCIランタイムとしてcc-runtimeを提供。Dockerなどから使える。</li>
            <li>VMで起動するOSはClear Linuxという特殊な軽量OS。</li>
            <li>
              ハイパバイザもQEMU-KVMをカスタマイズしたqemu-lightで、VMを200msくらいで立ち上げられる。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2015-runv" class="step cr-logo" data-x="-500" data-y="1000">
        <h2><span>2015/5</span></h2>
        <img class="logo" src="img/runv.png" />
      </div>

      <div
        id="y2015-runv-descr"
        class="step slide cr-descr"
        data-x="-500"
        data-y="1000"
        data-rotate-x="90"
      >
        <img src="img/runv.png" />
        <div class="descr-text">
          <h2>runV (HyperContainer)</h2>
          <ul>
            <li>
              2015年5月に公開された中国のチーム(のちのHyper社)によるコンテナランタイム。
            </li>
            <li>
              使用感はDockerに寄せられていて、デーモンのhyperdとクライアントのhyperctlとOCIランタイムのrunVという組み合わせ。
            </li>
            <li>
              QEMU-KVMのVMで各コンテナをラップして、ホストと強く隔離する。Clear
              Containersと似ている。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2015-containerd" class="step cr-logo" data-x="-500" data-y="1500">
        <h2><span>2015/12</span></h2>
        <img class="logo" src="img/containerd.png" />
      </div>

      <div
        id="y2015-containerd-descr"
        class="step slide cr-descr"
        data-x="-500"
        data-y="1500"
        data-rotate-x="90"
      >
        <img src="img/containerd-descr.png" />
        <div class="descr-text">
          <h2>containerd</h2>
          <ul>
            <li>
              Docker社が2015年12月に発表。
            </li>
            <li>
              Dockerからのスピンオフ。
            </li>
            <li>
              runCより上のレイヤでコンテナ管理やコンテナイメージ管理を受け持つ。
            </li>
            <li>
              2017年3月にコミュニティに寄贈され、コンテナエコシステムの成長を加速させたのはいいけど、Dockerの存在意義は相対的に下がった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2016-singularity" class="step cr-logo" data-x="500" data-y="-1500">
        <h2><span>2016/4</span></h2>
        <img class="logo" src="img/singularity.png" />
      </div>

      <div
        id="y2016-singularity-descr"
        class="step slide cr-descr"
        data-x="500"
        data-y="-500"
        data-rotate-x="90"
      >
        <img src="img/singularity.png" />
        <div class="descr-text">
          <h2>Singularity</h2>
          <ul>
            <li>
              Sylabs社が開発しているHigh Performance Computing (HPC)向けOCIランタイム。
            </li>
            <li>
              2016年4月にv1.0がリリース。
            </li>
            <li>
              GPUや並列処理(MPI)のサポートがあって高性能で、それでいてセキュア。
            </li>
            <li>
              科学技術業界やアカデミックな世界では結構使われているらしく、現在も割と活発に更新されている。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2016-cri" class="step cr-logo" data-x="500" data-y="-1000">
        <h2><span>2016/12</span></h2>
        <img class="logo" src="img/cri.png" />
        <div>(ロゴは無いのでイメージ)</div>
      </div>

      <div
        id="y2016-cri-descr"
        class="step slide cr-descr"
        data-x="500"
        data-y="-1000"
        data-rotate-x="90"
      >
        <img src="img/cri-descr.png" />
        <div class="descr-text">
          <h2>CRIとdockershim</h2>
          <ul>
            <li>
              Kubernetesコミュニティが2016年12月にContainer Runtime Interface (CRI)を発表。
            </li>
            <li>
              kubeletとコンテナランタイムとの間のインターフェースを標準化。
              Podのライフサイクル管理やコンテナイメージ管理のためのインターフェースを定めている。
            </li>
            <li>
              kubelet組み込みのdockershimとが最初のCRI実装。
              dockershimはkubeletがCRI対応していないdockerdと話すためのもの。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2016-crio" class="step cr-logo" data-x="500" data-y="-500">
        <h2><span>2016/9</span></h2>
        <img class="logo" src="img/crio.png" />
      </div>

      <div
        id="y2016-crio-descr"
        class="step slide cr-descr"
        data-x="500"
        data-y="-500"
        data-rotate-x="90"
      >
        <img src="img/crio-descr.png" />
        <div class="descr-text">
          <h2>CRI-O</h2>
          <ul>
            <li>
              Red Hatが2016年9月に発表したCRI準拠且つOCI対応のコンテナランタイム。
            </li>
            <li>
              Red
              Hatはさらに、イメージレジストリと話すskopeo、イメージをビルドするBuildah、コンテナランタイムのPodmanを開発し、Docker包囲網を整備。
            </li>
            <li>
              RHEL 8からRed
              HatビルドのDockerパッケージがなくなったので、KubernetesにはCRI-Oを使えということ?
            </li>
          </ul>
        </div>
      </div>

      <div id="y2016-rktlet" class="step cr-logo" data-x="500" data-y="0">
        <h2><span>2016/9</span></h2>
        <img class="logo" src="img/rktlet.png" />
      </div>

      <div
        id="y2016-rktlet-descr"
        class="step slide cr-descr"
        data-x="500"
        data-y="０"
        data-rotate-x="90"
      >
        <img src="img/rktlet.png" />
        <div class="descr-text">
          <h2>rktlet</h2>
          <ul>
            <li>
              CRI-Oと同時期に開発されたCoreOS社製CRI実装。
            </li>
            <li>
              名前の通りrkt向け。
            </li>
            <li>
              2017年末位に開発止まった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2016-frakti" class="step cr-logo" data-x="500" data-y="500">
        <h2><span>2016/12</span></h2>
        <img class="logo" src="img/frakti.png" />
        <div>(ロゴは無いのでイメージ)</div>
      </div>

      <div
        id="y2016-frakti-descr"
        class="step slide cr-descr"
        data-x="500"
        data-y="50０"
        data-rotate-x="90"
      >
        <img src="img/frakti.png" />
        <div class="descr-text">
          <h2>Frakti</h2>
          <ul>
            <li>
              CRIと同時に発表された、HyperContainer向けのCRI実装。
            </li>
            <li>
              初バージョン(v0.1)が出たのは2017年3月。
            </li>
            <li>
              2018年11月にv1.12.0でKubernetes 1.12対応して以来開発止まった模様。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2017-moby" class="step cr-logo" data-x="1500" data-y="-1500">
        <h2><span>2017/4</span></h2>
        <img class="logo" src="img/moby.png" />
      </div>

      <div
        id="y2017-moby-descr"
        class="step slide cr-descr"
        data-x="1500"
        data-y="-150０"
        data-rotate-x="90"
      >
        <img src="img/moby.png" />
        <div class="descr-text">
          <h2>Moby</h2>
          <ul>
            <li>
              2017年4月にDocker社が発表したOSSプロジェクト。
            </li>
            <li>
              コンテナ技術のライブラリ化とコンポーネント化を進めて再利用したり再構築しやすくし、重複開発や車輪の再発明を防ぎ、サードパーティが効率よく独自のコンテナシステムを開発できるようにすることが目的。
            </li>
            <li>
              Dockerはv17.06からMobyベース。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2017-railcar" class="step cr-logo" data-x="1500" data-y="-1000">
        <h2><span>2017/6</span></h2>
        <img class="logo" src="img/railcar.png" />
      </div>

      <div
        id="y2017-railcar-descr"
        class="step slide cr-descr"
        data-x="1500"
        data-y="-1000"
        data-rotate-x="90"
      >
        <img src="img/railcar.png" />
        <div class="descr-text">
          <h2>railcar</h2>
          <ul>
            <li>
              Oracleが2017年6月にリリースしたOCIランタイム。
            </li>
            <li>
              機能的にはrunCの劣化版。Rustで書かれている以外に特徴はない。
            </li>
            <li>
              ひと月くらいで開発止まった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2017-virtlet" class="step cr-logo" data-x="1500" data-y="-500">
        <h2><span>2017/6</span></h2>
        <img class="logo" src="img/virtlet.png" />
        <div>(ロゴは無いのでイメージ)</div>
      </div>

      <div
        id="y2017-virtlet-descr"
        class="step slide cr-descr"
        data-x="1500"
        data-y="-500"
        data-rotate-x="90"
      >
        <img src="img/virtlet-descr.png" />
        <div class="descr-text">
          <h2>virtlet</h2>
          <ul>
            <li>
              Mirantisが開発するCRI実装。
            </li>
            <li>
              2017年6月に公開版としては初版のv0.7.0がリリースされた。
            </li>
            <li>
              コンテナを仮想マシンでラップするわけではなく、仮想マシン上で直接ワークロードを動かすのが特徴。
            </li>
            <li>
              CRI
              Proxyを使うことで、一つのKubernetesクラスタ上で普通のコンテナワークロードとvirtletの仮想マシンワークロードを同居させられる。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2017-cri-containerd" class="step cr-logo" data-x="1500" data-y="0">
        <h2><span>2017/9</span></h2>
        <img class="logo" src="img/cri-containerd.png" />
        <div>(ロゴは無いのでイメージ)</div>
      </div>

      <div
        id="y2017-cri-containerd-descr"
        class="step slide cr-descr"
        data-x="1500"
        data-y="0"
        data-rotate-x="90"
      >
        <img src="img/cri-containerd-descr.png" />
        <div class="descr-text">
          <h2>cri-containerd</h2>
          <ul>
            <li>
              kubeletから独立したCRI実装。(cf. dockershim)
            </li>
            <li>
              2017年9月にKubernetes 1.8とcontainerd 1.0.0とともにv1.0.0のα版がリリースされた。
            </li>
            <li>
              containerdと直接話せるので、Kubernetesにはdockerdが要らなくなった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2017-kata" class="step cr-logo" data-x="1500" data-y="500">
        <h2><span>2017/12</span></h2>
        <img class="logo" src="img/kata.png" />
      </div>

      <div
        id="y2017-kata-descr"
        class="step slide cr-descr"
        data-x="1500"
        data-y="500"
        data-rotate-x="90"
      >
        <img src="img/kata-descr.png" />
        <div class="descr-text">
          <h2>Kata Containers</h2>
          <ul>
            <li>
              2017年12月にOpenStack Foundationのもとで立ち上げられたコンテナランタイムプロジェクト。
            </li>
            <li>
              Clear ContainersとrunVの後継。
            </li>
            <li>
              ARMなどを含む色んなハードウェアに対応。QEMU以外のハイパバイザのサポートも進めていて、最近Firecrackerに対応した。
            </li>
            <li>
              2018年12月にIBM開発のrunqの成果を取り込み、メインフレーム(IBM
              Z)でもコンテナを動かせるようになった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2017-runhcs" class="step cr-logo" data-x="1500" data-y="1000">
        <h2><span>2017/12</span></h2>
        <img class="logo" src="img/runhcs.png" />
      </div>

      <div
        id="y2017-runhcs-descr"
        class="step slide cr-descr"
        data-x="1500"
        data-y="1000"
        data-rotate-x="90"
      >
        <img src="img/runhcs-descr.png" />
        <div class="descr-text">
          <h2>runhcs</h2>
          <ul>
            <li>
              2017年12月にでたKubernetes 1.9がWindows Containersをベータサポート。
            </li>
            <li>
              このころにはWindows ContainersもOCIに準拠し、OCIランタイムであるrunhcsを提供していた。
            </li>
            <li>
              KubernetesのWindows Containers対応は、2019年3月にリリースされたKubernetes
              1.14でGAになった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2018-containerd" class="step cr-logo" data-x="2500" data-y="-1500">
        <h2><span>2018/3</span></h2>
        <img class="logo" src="img/containerd.png" />
      </div>

      <div
        id="y2018-containerd-descr"
        class="step slide cr-descr"
        data-x="2500"
        data-y="-1500"
        data-rotate-x="90"
      >
        <img src="img/cri-plugin-descr.png" />
        <div class="descr-text">
          <h2>criプラグイン</h2>
          <ul>
            <li>
              cri-containerdは正式リリース版に到達する前にcriプラグインに置き換えられ、2018年3月にでたcontainerd
              1.1.0のRC版に組み込まれた。
            </li>
            <li>
              これにより、containerd自体がCRIに準拠してKubernetesネイティブになった。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2018-gvisor" class="step cr-logo" data-x="2500" data-y="-1000">
        <h2><span>2018/5</span></h2>
        <img class="logo" src="img/gvisor.png" />
      </div>

      <div
        id="y2018-gvisor-descr"
        class="step slide cr-descr"
        data-x="2500"
        data-y="-1000"
        data-rotate-x="90"
      >
        <img src="img/gvisor-descr.png" />
        <div class="descr-text">
          <h2>gVisor</h2>
          <ul>
            <li>
              2018年5月にGoogleが発表したコンテナランタイム。
            </li>
            <li>
              Sentryというユーザスペースのプログラムがカーネルをエミュレートし、その上でコンテナを動かす。
              ホストカーネルにシステムコールがほとんど通らないのでセキュアだけど、VMではないので軽い。
            </li>
            <li>
              OCIランタイムとしてrunscを提供。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2018-nabla" class="step cr-logo" data-x="2500" data-y="-500">
        <h2><span>2018/7</span></h2>
        <img class="logo" src="img/nabla.png" />
      </div>

      <div
        id="y2018-nabla-descr"
        class="step slide cr-descr"
        data-x="2500"
        data-y="-500"
        data-rotate-x="90"
      >
        <img src="img/nabla-descr.png" />
        <div class="descr-text">
          <h2>Nabla Containers</h2>
          <ul>
            <li>
              2018年7月にIBM Researchが発表したコンテナランタイム。
            </li>
            <li>
              Unikernelの技術を利用。
            </li>
            <li>
              コンテナのユーザアプリはライブラリOSとリンクされ、Solo5というハイパバイザ上で動く。
              Solo5からホストOSへのシステムコールは7種しかなくてセキュア。
            </li>
            <li>
              OCIランタイムとしてrunncを提供。
              ただしコンテナイメージがOCI準拠じゃないので普通のコンテナは動かせない。
            </li>
          </ul>
        </div>
      </div>

      <div id="y2018-end" class="step slide" data-x="2500" data-y="0">
        <h2>おわりに</h2>
        <li>
          コンテナランタイムは奥が深くて面白い。
        </li>
        <li>
          時間があれば実際に触って動かしてもみたい。時間があれば。
        </li>
        <li>
          参考文献: <br />
          https://www.kaitoy.xyz/2019/06/15/k8s-ecosystem-container-runtimes/
        </li>
      </div>

      <div id="overview" class="step" data-x="0" data-y="0" data-z="0" data-scale="5"></div>
    </div>

    <script src="js/impress.js"></script>
    <script>
      impress().init();
    </script>
  </body>
</html>
